<ion-header class="h-16 flex  bg-transparent">
    <ion-toolbar class="mt-4 bg-transparent">
        @if (step !== 0) {
        <ion-buttons slot="start">
            <ion-button class="w-24" color="medium" (click)="backStep()">
                Back
            </ion-button>
        </ion-buttons>
        }@else {
        <ion-buttons slot="start">
            <ion-button class="w-24" color="medium" disabled="true">

            </ion-button>
        </ion-buttons>
        }
        <ion-title class="text-center font-sans font-semibold text-sm">
            Vita Weight
        </ion-title>
        <ion-buttons slot="end">
            <ion-button class="w-24" (click)="nextStep()" [strong]="true" color="primary">
                {{ step < 3 ? 'Next' : 'Confirm' }} </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content scrollY="false">
    <div
        class="h-full flex flex-col items-center text-center px-6 py-10 space-y-5 bg-gradient-to-tr from-emerald-100 to-emerald-300 w-full">
        @switch (step) {
        @case (0) {
        <h1 class="text-xl font-bold text-primary text-pretty text-center">
            Your journey to a healthier you starts now! ğŸš€
        </h1>
        <ul class="mt-6 space-y-3 text-left bg-teal-100 p-5 rounded-2xl  shadow-xl bg-opacity-30">
            <li class="flex items-center gap-2">
                ğŸ’¡ <span class="text-lg font-medium">Track your progress</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ“Š <span class="text-lg font-medium">Set achievable goals</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ“ˆ <span class="text-lg font-medium">View analysis</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ <span class="text-lg font-medium">Build healthy habits</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ‰ <span class="text-lg font-medium">Celebrate your milestones</span>
            </li>
        </ul>
        <img src="assets/images/initial-image-cartoon.png" class="h-1/3 drop-shadow-2xl" />
        }
        @case (1) {
        <h1 class="text-3xl font-extrabold text-primary">
            Track Your Weight
        </h1>
        <p class="text-lg text-gray-700 text-pretty">Stay consistent and monitor your progress!</p>

        <form class="w-4/5 bg-white rounded-lg shadow-2xl border-t-8 border-b-8 border-r-4 border-l-4 border-emerald-500 p-10">
            <div class="h-full bg-white flex flex-col items-center">
                <p class="text-lg text-gray-700 m-0 p-0">Register your weight</p>
                <app-weight-form [inputWeightValue]="actualWeight()" [inputWeightUnit]="lastWeightUnit"
                    (outputWeightValue)="updateActualWeight($event)"></app-weight-form>
            </div>
        </form>
        }
        @case (2) {
        <h1 class="text-3xl font-extrabold text-primary">
            Set Your Goal
        </h1>
        <p class="text-lg text-gray-700">
            Define your personal goals to stay motivated and focused on your fitness journey. Here are some ideas:
        </p>
        <ul class="space-y-3 text-left bg-teal-100 p-5 rounded-2xl shadow-xl bg-opacity-30">
            <li class="flex items-center gap-2">
                ğŸ¯ <span class="text-lg font-medium">Lose weight and stay fit</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ’ª <span class="text-lg font-medium">Increase your strength</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸƒ <span class="text-lg font-medium">Improve endurance</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ§˜ <span class="text-lg font-medium">Enhance flexibility</span>
            </li>
            <li class="flex items-center gap-2">
                ğŸ¥— <span class="text-lg font-medium">Adopt a healthier diet</span>
            </li>
        </ul>
        <div class="p-3 flex flex-col items-center space-y-3">
            @if (!isGoal()) {
                <ion-button class="w-40" color="primary" (click)="openModal()">
                    Set weight Goal
                </ion-button>
                <p class="text-pretty text-center text-xs h-1 text-teal-500">It's optional, but recommended</p>
                <!-- <p class="text-pretty text-center text-xs h-1"> you can update your goal at any time.</p> -->
            }@else {
                <p>You already have a weight goalâœ…</p>
                <p>Weight goal: {{ goalWeight?.weight }} {{ goalWeight?.weight_units }}</p>
                @if (validateGoalDate()) {
                    <p>Date: {{ goalWeight?.date | simpleDate: 'MM/dd/yyyy' }}</p>
                }
            }
        </div>
        }

        @case (3) {
        <h1 class="text-xl font-extrabold m-0 h-5">
            Personal Information
        </h1>
        <p class="text-lg h-2">Please fill in your information. </p>
        <p class="text-lg h-4 text-teal-500">All fields are optional.</p>

        <form id="form"
            class="w-full max-w-lg bg-white p-8 rounded-lg shadow-2xl space-y-6 border-t-8 border-emerald-500">

            <!-- Name -->
            <div class="flex flex-col space-y-3">
                <label for="name" class="text-sm font-medium text-teal-600">Name (Optional)</label>
                <input id="name" name="name" placeholder="Enter your name"
                    [(ngModel)]="name" (input)="validateName($event)"
                    class="px-4 py-3 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all ease-in-out duration-300 shadow-sm"
                >
            </div>

            <!-- Age -->
            <div class="flex flex-col space-y-3">
                <label for="age" class="text-sm font-medium text-teal-600">Age (Optional)</label>
                <input id="age" name="age" type="number" placeholder="Enter your age"
                    [(ngModel)]="age"  (input)="validateAge($event)"
                    class="px-4 py-3 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all ease-in-out duration-300 shadow-sm"
                >
            </div>

            <!-- Height -->
            <div class="flex flex-col space-y-3">
                <label for="height" class="text-sm font-medium text-teal-600">Height (Optional)</label>
                <input id="height" name="height" type="number" placeholder="Enter your height (cm)"
                    [(ngModel)]="height" (input)="validateHeight($event)"
                    class="px-4 py-3 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all ease-in-out duration-300 shadow-sm"
                >
            </div>

            <!-- Gender -->
            <div class="flex flex-col space-y-3">
                <label for="gender" class="text-sm font-medium text-teal-600">Gender (Optional)</label>
                <ion-select id="gender" name="gender" placeholder="Select your gender"
                    [(ngModel)]="gender"
                    class="px-4 py-1 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all ease-in-out duration-300 shadow-sm"
                >
                    <ion-select-option value="female">Female</ion-select-option>
                    <ion-select-option value="male">Male</ion-select-option>
                    <ion-select-option value="other">Other</ion-select-option>
                </ion-select>
            </div>

        </form>



        }
        }
    </div>
</ion-content>
